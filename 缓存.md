# 缓存设计注意事项

## 缓存穿透
- 缓存穿透是指，查询一个缓存和数据库都不存在的key, 用户频繁的查询，导致db压力上涨
- 解决办法: 
    1. 对查询key做合法性判断，过滤一部分
    2. 对这个key做一个空缓存，等这个key, insert插入时删除空缓存

## 缓存击穿
- 缓存击穿一条数据(一般是热点数据)缓存失效，然后大量的请求过来，然后请求全部打到db去了，有可能会引起db崩溃
- 解决办法:
    1. 对热点数据设置缓存不过期
    2. 做防穿透设计(signalflight包可以做到)

## 缓存雪崩
- 缓存雪崩是指同时有大批量缓存数据过期，导致请求全部落地到db
- 解决办法:
    1. 对不同的key，做不同的缓存时间设计
    2. 随机延时key


